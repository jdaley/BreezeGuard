<!DOCTYPE html>
<html>
<head>
    <title>TinyDemo</title>
    <link rel="stylesheet" type="text/css" href="demo.css" />
</head>
<body>
    <h1>TinyDemo API Client</h1>

    <div id="demos"></div>
    <div id="description">&nbsp;</div>

    <h2>Request</h2>

    <div>
        Method: <select id="method"><option>GET</option><option>POST</option></select>
        URL: <input id="url" type="text" />
        <button id="send">Send</button>
    </div>
    <div>
        Body:<br />
        <textarea id="requestbody"></textarea>
    </div>

    <h2>Response</h2>

    <div>Status: <input id="status" type="text" /></div>
    <div>
        Body:<br />
        <div id="responsebody"></div>
    </div>

    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="demo.js"></script>

    <script>
        window.demos = [
            {
                name: 'Metadata',
                description: 'Retrieve the Breeze metadata. The excluded User entity and the excluded Stock and WholesalePrice ' +
                    'properties on Product do not appear in metadata.',
                url: '/breeze/TinyDemo/Metadata'
            },
            {
                name: 'Orders',
                description: 'Fetch all orders. We can only see orders that belong to the current user.',
                url: '/breeze/TinyDemo/Orders?$expand=Lines'
            },
            {
                name: 'Products',
                description: 'Fetch all products. The excluded Stock and WholesalePrice properties are not returned, and we can ' +
                    'only see active products.',
                url: '/breeze/TinyDemo/Products'
            },
            {
                name: 'Query Stock',
                description: 'Attempt to query Products using the excluded Stock property. The server returns an error message ' +
                    'that the property does not exist.',
                url: '/breeze/TinyDemo/Products?$filter=Stock gt 50'
            },
            {
                name: 'Create Order',
                description: 'Call SaveChanges to create a new order. See what happens if you attempt to create an order with ' +
                    'IsPaid set to true, or UserId set to another user.',
                method: 'POST',
                url: '/breeze/TinyDemo/SaveChanges',
                body: 'createorder'
            },
            {
                name: 'Update IsPaid',
                description: 'Attempt to directly modify Order.IsPaid. The server returns an error.',
                method: 'POST',
                url: '/breeze/TinyDemo/SaveChanges',
                body: 'updateorderispaid'
            },
            {
                name: 'ProcessPayment',
                description: 'Call the ProcessPayment API, which sets Order.IsPaid to true using a server-side process.',
                method: 'POST',
                url: '/breeze/TinyDemo/ProcessPayment',
                body: 'processpayment'
            },
            {
                name: 'Update Line on Paid Order',
                description: 'Attempt to update an order line for an order that has been paid. The server returns a validation error.',
                method: 'POST',
                url: '/breeze/TinyDemo/SaveChanges',
                body: 'updatelineonpaidorder'
            },
            {
                name: 'Update Another User\'s Order',
                description: 'Attempt to update an order that belongs to another user. The server returns an error that the ' +
                    'record does not exist.',
                method: 'POST',
                url: '/breeze/TinyDemo/SaveChanges',
                body: 'updateanotherusersorder'
            }
        ];
    </script>

    <script type="text/template" id="createorder">
{
    "entities": [
        {
            "Id": -1,
            "IsPaid": false,
            "CustomerId": 1,
            "entityAspect": {
                "entityTypeName": "Order:#TinyDemo.Entities",
                "defaultResourceName": "Orders",
                "entityState": "Added",
                "originalValuesMap": {},
                "autoGeneratedKey": {
                    "propertyName": "Id",
                    "autoGeneratedKeyType": "Identity"
                }
            }
        },
        {
            "Id": -2,
            "OrderId": -1,
            "Description": "Coffee",
            "Price": 30,
            "entityAspect": {
                "entityTypeName": "OrderLine:#TinyDemo.Entities",
                "defaultResourceName": "OrderLines",
                "entityState": "Added",
                "originalValuesMap": {},
                "autoGeneratedKey": {
                    "propertyName": "Id",
                    "autoGeneratedKeyType": "Identity"
                }
            }
        }
    ],
    "saveOptions": {}
}
    </script>

    <script type="text/template" id="updateorderispaid">

    </script>

    <script type="text/template" id="processpayment">

    </script>

    <script type="text/template" id="updatelineonpaidorder">

    </script>

    <script type="text/template" id="updateanotherusersorder">

    </script>

</body>
</html>
